# Example Telegraf configuration for Metrics Agent integration
# Add this section to your existing telegraf.conf file

[[inputs.execd]]
  command = ["/opt/metrics-agent/bin/metrics_agent", "start"]
  signal = "STDIN"
  restart_delay = "10s"
  data_format = "influx"
  
  # Optional: Add tags to all metrics from this input
  [inputs.execd.tags]
    source = "metrics_agent"
    environment = "production"

# Example output configuration (adjust as needed)
[[outputs.influxdb_v2]]
  urls = ["http://localhost:8086"]
  token = "$INFLUX_TOKEN"
  organization = "your-org"
  bucket = "metrics"

# Alternative: File output for testing
# [[outputs.file]]
#   files = ["/var/log/telegraf/metrics-agent.log"]
#   data_format = "influx"
